import{D as k,_ as C,a as O}from"./CBdH65Qz.js";import{_ as N,o as T,K as e,S as v,e as I,v as D,z as A,N as U,x as Y,Q as F,t as G}from"./YEiu3vBa.js";import{T as H}from"./A5NR8V2b.js";import{_ as M}from"./vMG4t2_w.js";import{i as z}from"./z_Rmi15k.js";import"./Diu1vur_.js";const q={style:{position:"fixed",bottom:"0",width:"100%"}},W={__name:"index",setup(K){let f;return T(()=>{localStorage.getItem("cameFromHome")==="true"&&(window.location.reload(),localStorage.removeItem("cameFromHome"))}),T(()=>{e.registerPlugin(v,k),e.set(".box",{yPercent:-50});const c=.1,m=1,E=0,t=e.utils.toArray(".box"),g=e.timeline({paused:!0,repeat:-1,ease:"none"}),w=[...t,...t,...t];z(),w.forEach((a,s)=>{const o=e.timeline().set(a,{xPercent:250,rotateY:-50,opacity:0,scale:.5}).to(a,{opacity:1,scale:1,duration:.1},0).to(a,{opacity:0,scale:.5,duration:.1},.9).fromTo(a,{xPercent:250},{xPercent:-350,duration:1,immediateRender:!1,ease:"power1.inOut"},0).fromTo(a,{rotateY:-50},{rotateY:50,immediateRender:!1,duration:1,ease:"power4.inOut",onUpdate:()=>{const i=e.getProperty(a,"rotateY");Math.abs(i)<=15?a.classList.add("facing"):a.classList.remove("facing")}},0).to(a,{z:100,scale:1.25,duration:.1,repeat:1,yoyo:!0},.4).fromTo(a,{zIndex:1},{zIndex:t.length,repeat:1,yoyo:!0,ease:"none",duration:.5},0);g.add(o,s*c)});const h=c*t.length,P=h+m*.5+E,d=e.fromTo(g,{totalTime:P},{totalTime:`+=${h}`,duration:1,ease:"none",repeat:-1,paused:!0}),_={position:0},y=e.utils.wrap(0,d.duration()),r=e.to(_,{position:0,onUpdate:()=>{d.totalTime(y(_.position))},paused:!0,duration:.25,ease:"power3"});let p=0;const n=v.create({start:0,end:"+=2000",horizontal:!1,pin:".boxes",onUpdate:a=>{const s=a.scroll();if(s>a.end-1)u(1,1);else if(s<1&&a.direction<0)u(-1,a.end-1);else{const o=(p+a.progress)*d.duration();r.vars.position=o,r.invalidate().restart()}}}),u=(a,s)=>{p+=a,n.scroll(s),n.update()},L=e.utils.snap(1/t.length),R=a=>e.utils.clamp(1,n.end-1,e.utils.wrap(0,1,a)*n.end),l=a=>{const o=(L(a)-d.duration()*p)/d.duration(),i=R(o);if(o>=1||o<0)return u(Math.floor(o),i);n.scroll(i)};f=()=>l(r.vars.position),v.addEventListener("scrollEnd",f);const x=()=>l(r.vars.position-1/t.length),S=()=>l(r.vars.position+1/t.length);document.addEventListener("keydown",a=>{(a.code==="ArrowLeft"||a.code==="KeyA")&&x(),(a.code==="ArrowRight"||a.code==="KeyD")&&S()}),document.querySelector(".boxes").addEventListener("click",a=>{const s=a.target.closest(".box");if(s&&s.classList.contains("facing")){console.log("Клик на facing. Пролистывание отменено.");return}if(s){let o=t.indexOf(s),i=e.utils.wrap(0,t.length,Math.floor(t.length*r.vars.position)),b=o-i;o>i&&o-i>t.length*.5&&(b=(t.length-b)*-1),i>o&&i-o>t.length*.5&&(b=t.length+b),l(r.vars.position+b*(1/t.length))}}),document.querySelector(".next").addEventListener("click",x),document.querySelector(".prev").addEventListener("click",S),e.set(".box",{display:"block"}),k.create(".drag-proxy",{type:"x",trigger:".box",onPress(){this.startOffset=r.vars.position},onDrag(){r.vars.position=this.startOffset+(this.startX-this.x)*.001,r.invalidate().restart()},onDragEnd(){l(r.vars.position)}})}),I(()=>{f&&v.removeEventListener("scrollEnd",f),v.getAll().forEach(c=>c.kill()),e.globalTimeline.clear()}),(c,m)=>(G(),D(F,null,[A(H),m[0]||(m[0]=U('<div class="boxes" data-v-b5a5b0f1><div class="box" data-v-b5a5b0f1><div class="header" data-v-b5a5b0f1>Album cover 1</div><a href="/works/fontain" class="cover-link" data-v-b5a5b0f1><img src="https://freight.cargo.site/w/1500/q/75/i/d9284ef07536eac3d8df764eca89b6b4b98a892a53de82c1b71365a20f653712/S3_LSO24_Terrain.jpg" alt="Cover 1" data-v-b5a5b0f1></a></div><div class="box" data-v-b5a5b0f1><div class="header" data-v-b5a5b0f1>Album cover 2</div><a href="https://link_to_album_2.com" class="cover-link" data-v-b5a5b0f1><img src="https://freight.cargo.site/w/1500/q/75/i/7619e4a0e73a99b6497f54ea51b7a0b5a73b36333ba8c33e73679c043bc49445/LMD_Grapefruit_Flower_08_backlit_SH_01.jpg" alt="Cover 2" data-v-b5a5b0f1></a></div><div class="box" data-v-b5a5b0f1><div class="header" data-v-b5a5b0f1>Album cover 3</div><a href="https://link_to_album_3.com" class="cover-link" data-v-b5a5b0f1><img src="https://i.scdn.co/image/ab67616d00001e02a7ea08ab3914c5fb2084a8ac" alt="Cover 3" data-v-b5a5b0f1></a></div><div class="box" data-v-b5a5b0f1><div class="header" data-v-b5a5b0f1>Album cover 4</div><a href="https://link_to_album_4.com" class="cover-link" data-v-b5a5b0f1><img src="https://i.scdn.co/image/ab67616d00001e0213ca80c3035333e5a6fcea59" alt="Cover 4" data-v-b5a5b0f1></a></div><div class="box" data-v-b5a5b0f1><div class="header" data-v-b5a5b0f1>Album cover 5</div><a href="https://link_to_album_5.com" class="cover-link" data-v-b5a5b0f1><img src="https://i.scdn.co/image/ab67616d00001e02df04e6071763615d44643725" alt="Cover 5" data-v-b5a5b0f1></a></div><div class="box" data-v-b5a5b0f1><div class="header" data-v-b5a5b0f1>Album cover 6</div><a href="https://link_to_album_6.com" class="cover-link" data-v-b5a5b0f1><img src="https://i.scdn.co/image/ab67616d00001e0239c7302c04f8d06f60e14403" alt="Cover 6" data-v-b5a5b0f1></a></div><div class="box" data-v-b5a5b0f1><div class="header" data-v-b5a5b0f1>Album cover 7</div><a href="https://link_to_album_7.com" class="cover-link" data-v-b5a5b0f1><img src="https://i.scdn.co/image/ab67616d00001e021c0bcf8b536295438d26c70d" alt="Cover 7" data-v-b5a5b0f1></a></div><div class="box" data-v-b5a5b0f1><div class="header" data-v-b5a5b0f1>Album cover 8</div><a href="https://link_to_album_8.com" class="cover-link" data-v-b5a5b0f1><img src="https://i.scdn.co/image/ab67616d00001e029bbd79106e510d13a9a5ec33" alt="Cover 8" data-v-b5a5b0f1></a></div><div class="box" data-v-b5a5b0f1><div class="header" data-v-b5a5b0f1>Album cover 9</div><a href="https://link_to_album_9.com" class="cover-link" data-v-b5a5b0f1><img src="https://www.udiscovermusic.com/wp-content/uploads/2015/10/Kanye-West-Yeezus.jpg" alt="Cover 9" data-v-b5a5b0f1></a></div></div><div class="controls" data-v-b5a5b0f1><button class="next" data-v-b5a5b0f1><img class="arrow-works" src="'+C+'" data-v-b5a5b0f1></button><button class="prev" data-v-b5a5b0f1><img class="arrow-works" src="'+O+'" data-v-b5a5b0f1></button></div><div class="drag-proxy" data-v-b5a5b0f1></div><div id="teleports" data-v-b5a5b0f1></div>',4)),Y("div",q,[A(M)])],64))}},Z=N(W,[["__scopeId","data-v-b5a5b0f1"]]);export{Z as default};
